# WiFi自动认证工具

一个用于武汉理工大学校园网自动连接和Portal认证的工具，支持自动连接WHUT-DORM WiFi并完成网页认证登录。

## 功能特点

✅ **自动WiFi连接** - 自动连接到指定的校园网WiFi  
✅ **Portal自动认证** - 自动填写用户名密码并登录认证页面  
✅ **配置文件管理** - 通过配置文件管理登录信息  
✅ **智能URL获取** - 自动获取带参数的认证页面URL  
✅ **错误处理** - 完善的错误处理和日志记录  
✅ **打包版本** - 提供独立的exe可执行文件  

## 系统要求

- **操作系统**: Windows 10/11
- **浏览器**: Microsoft Edge（任意版本）
- **权限**: 需要管理员权限运行
- **网络**: 支持WHUT-DORM等校园网WiFi

## 快速开始

### 第一步：下载文件

确保您有以下文件：

```
您的文件夹/
├── WiFi自动认证工具.exe      # 主程序
├── msedgedriver.exe          # Edge驱动（需要下载，压缩包内自带Version 137.0.3296.93 64位）
└── config.txt                # 配置文件（自动生成）
```

### 第二步：下载Edge驱动

1. **查看Edge版本**：
   - 打开Microsoft Edge浏览器
   - 点击右上角三点菜单 → 帮助和反馈 → 关于Microsoft Edge
   - 记录版本号（如：126.0.2592.68）

2. **下载对应驱动**：
   - 访问：https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/
   - 下载与您Edge版本匹配的驱动
   - 将下载的`msedgedriver.exe`放在程序同目录

### 第三步：首次运行

1. **以管理员身份运行**：
   - 右键点击`WiFi自动认证工具.exe`
   - 选择"以管理员身份运行"

2. **自动生成配置文件**：
   - 程序会自动创建`config.txt`配置文件
   - 首次运行可能会因为配置不正确而失败，这是正常的

### 第四步：配置账号信息

编辑`config.txt`文件，填入您的登录信息：

```ini
[SETTINGS]
username = 您的用户名        # 填入校园卡卡号后六位的绝对值
password = 您的密码          # 填入智慧校园密码
portal_url = 您的密码        # 电脑连接WIFI时自动打开的网址
wifi_ssid = WHUT-DORM       # WiFi名称，一般不需要修改
```

**用户名说明**：

- 校园网用户名是**校园卡卡号**

**密码说明**：

- 密码为**智慧校园密码**
- 如果修改过，请使用修改后的密码

### 第五步：正常使用

1. **断开当前网络**（如果已连接其他网络）
2. **以管理员身份运行程序**
3. **等待自动完成**：
   - 程序会自动连接WHUT-DORM WiFi
   - 自动获取认证页面URL
   - 自动填写用户名密码并登录
   - 成功后会显示"Portal认证完成！"

## 配置文件详解

### config.txt参数说明

| 参数名       | 说明             | 备注                 |
| ------------ | ---------------- | -------------------- |
| `username`   | 登录用户名       | 校园卡号后六位绝对值 |
| `password`   | 登录密码         | 智慧校园密码         |
| `portal_url` | 认证页面URL      | 根据实际WiFi网址修改 |
| `wifi_ssid`  | WiFi名称建议保持 | 建议保持             |



## 使用场景

### 日常使用

- 每天开机后运行一次，自动连接校园网
- 网络断开重连后运行，恢复网络访问

### 开机自启动

#### 使用任务计划程序

自行搜索教程并切记在完计划任务后调整属性为"用管理员身份运行"

#### 使用shell

1. 按`Win+R`，输入`shell:startup`
2. 将程序快捷方式复制到打开的文件夹
3. 右键快捷方式 → 属性 → 高级 → 勾选"用管理员身份运行"

## 常见问题

### Q1: 程序运行后提示"WiFi连接失败"

**解决方法**：

- 检查是否在WHUT-DORM信号覆盖范围内
- 确认WiFi名称是否正确（区分大小写）
- 尝试手动连接WiFi确认网络可用

### Q2: 提示"未找到Edge驱动"

**解决方法**：

- 确认`msedgedriver.exe`在程序同目录
- 检查驱动版本是否与Edge浏览器版本匹配
- 重新下载对应版本的驱动

### Q3: 提示"登录失败"或"IP不在线"

**解决方法**：

- 检查用户名和密码是否正确
- 确认是否已连接到WHUT-DORM
- 尝试断开所有网络连接后重新运行程序
- 手动打开浏览器测试能否正常访问认证页面

### Q4: 程序运行没有反应

**解决方法**：

- 确保以管理员权限运行
- 检查Windows防火墙和杀毒软件是否拦截
- 查看是否有其他Edge浏览器进程占用

### Q5: 认证成功但无法上网

**解决方法**：

- 等待几秒钟，网络生效有延迟
- 检查DNS设置是否正确
- 尝试重启网络适配器

## 高级功能

### 查看详细日志

程序运行时会显示详细的日志信息，包括：

- WiFi连接状态
- Portal URL获取过程
- 登录尝试结果
- 错误信息和解决建议

### 自定义等待时间

如果网络较慢，可以修改源码中的等待时间参数，然后重新打包。

## 注意事项

⚠️ **重要提醒**：

1. **必须以管理员权限运行**，否则无法操作WiFi连接
2. **首次使用前必须配置用户名和密码**
3. **确保Edge驱动版本与浏览器版本匹配**
4. **建议在网络环境良好时使用**
5. **如果长时间未响应，可以关闭程序重新运行**

⚡ **性能提示**：

- 程序运行时间约20-30秒
- 建议关闭其他占用网络的程序
- 首次运行可能需要更长时间

🔒 **安全提示**：

- 配置文件包含登录密码，请妥善保管
- 建议不要在公共计算机上使用
- 定期更新密码并同步修改配置文件

## 技术支持

### 开发信息

- **开发语言**: Python 3.10+
- **核心库**: Selenium WebDriver, PyWiFi
- **打包工具**: PyInstaller
- **适用平台**: Windows 10/11

### 源码说明

如需查看或修改源码，请参考以下文件：

- `wifi_portal_selenium.py` - 主程序源码
- `build_exe.py` - 打包脚本
- `requirements.txt` - 依赖列表

### 许可证

本软件仅供武汉理工大学师生个人学习和使用，请勿用于商业用途。

### 免责声明

- 本工具仅为方便校园网使用而开发
- 使用者需遵守学校网络使用规定
- 开发者不承担因使用本工具产生的任何责任

---

**如有问题或建议，欢迎反馈！**

最后更新：2025年6月 
